pipeline {
  agent {
    label 'jenkins-agent-npm'
  }

  stages {
    stage ('NPM Install & Build') {
      steps {
        sh """
					cd exchange-cli
					npm install
          npm run build
          npm link
				"""
      }
    }

    stage ('Functional Tests') {
      agent {
        label 'jenkins-agent-python'
      }
      steps {
        sh """
					cd exchange-cli
					pip install -r requirements.txt
          python -m pytest functional-test.py
        """
      }
    }
  }
}

